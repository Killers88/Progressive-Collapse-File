package edu.mit.civil.blastassessment.calculation;

import java.util.HashMap;
import java.util.Map;

/**
 * 
 * @author koleary UFC 3-340, Figure 2-3 pg79
 *
 */
public class PeakDynamicPressureQo {

	private static Map<Double, Double> graph = new HashMap<Double, Double>();

	static {
		graph.put((double) 10, (double) 2.25);
		graph.put((double) 11, (double) 2.583333333);
		graph.put((double) 12, (double) 2.916666667);
		graph.put((double) 13, (double) 3.25);
		graph.put((double) 14, (double) 4);
		graph.put((double) 15, (double) 4.4);
		graph.put((double) 16, (double) 4.8);
		graph.put((double) 17, (double) 5.8);
		graph.put((double) 18, (double) 6.3);
		graph.put((double) 19, (double) 6.8);
		graph.put((double) 20, (double) 8);
		graph.put((double) 21, (double) 8.625);
		graph.put((double) 22, (double) 9.25);
		graph.put((double) 23, (double) 10);
		graph.put((double) 24, (double) 11.07142857);
		graph.put((double) 25, (double) 12.14285714);
		graph.put((double) 26, (double) 13.21428571);
		graph.put((double) 27, (double) 14.28571429);
		graph.put((double) 28, (double) 15.35714286);
		graph.put((double) 29, (double) 16.42857143);
		graph.put((double) 30, (double) 17.5);
		graph.put((double) 31, (double) 18.375);
		graph.put((double) 32, (double) 19.25);
		graph.put((double) 33, (double) 20.125);
		graph.put((double) 34, (double) 21);
		graph.put((double) 35, (double) 22.08333333);
		graph.put((double) 36, (double) 23.16666667);
		graph.put((double) 37, (double) 24.25);
		graph.put((double) 38, (double) 25.33333333);
		graph.put((double) 39, (double) 26.41666667);
		graph.put((double) 40, (double) 27.5);
		graph.put((double) 41, (double) 28.66666667);
		graph.put((double) 42, (double) 29.83333333);
		graph.put((double) 43, (double) 31);
		graph.put((double) 44, (double) 32.28571429);
		graph.put((double) 45, (double) 33.57142857);
		graph.put((double) 46, (double) 34.85714286);
		graph.put((double) 47, (double) 36.14285714);
		graph.put((double) 48, (double) 37.42857143);
		graph.put((double) 49, (double) 38.71428571);
		graph.put((double) 50, (double) 40);
		graph.put((double) 51, (double) 41.28571429);
		graph.put((double) 52, (double) 42.57142857);
		graph.put((double) 53, (double) 43.85714286);
		graph.put((double) 54, (double) 45.14285714);
		graph.put((double) 55, (double) 46.42857143);
		graph.put((double) 56, (double) 47.71428571);
		graph.put((double) 57, (double) 49);
		graph.put((double) 58, (double) 51);
		graph.put((double) 59, (double) 53);
		graph.put((double) 60, (double) 55);
		graph.put((double) 61, (double) 56.36363636);
		graph.put((double) 62, (double) 57.72727273);
		graph.put((double) 63, (double) 59.09090909);
		graph.put((double) 64, (double) 60.45454545);
		graph.put((double) 65, (double) 61.81818182);
		graph.put((double) 66, (double) 63.18181818);
		graph.put((double) 67, (double) 64.54545455);
		graph.put((double) 68, (double) 65.90909091);
		graph.put((double) 69, (double) 67.27272727);
		graph.put((double) 70, (double) 68.63636364);
		graph.put((double) 71, (double) 70);
		graph.put((double) 72, (double) 71.66666667);
		graph.put((double) 73, (double) 73.33333333);
		graph.put((double) 74, (double) 75);
		graph.put((double) 75, (double) 76.66666667);
		graph.put((double) 76, (double) 78.33333333);
		graph.put((double) 77, (double) 80);
		graph.put((double) 78, (double) 81.66666667);
		graph.put((double) 79, (double) 83.33333333);
		graph.put((double) 80, (double) 85);
		graph.put((double) 81, (double) 87);
		graph.put((double) 82, (double) 89);
		graph.put((double) 83, (double) 91);
		graph.put((double) 84, (double) 93);
		graph.put((double) 85, (double) 95);
		graph.put((double) 86, (double) 97);
		graph.put((double) 87, (double) 99);
		graph.put((double) 88, (double) 101);
		graph.put((double) 89, (double) 103);
		graph.put((double) 90, (double) 105);
		graph.put((double) 91, (double) 107.5);
		graph.put((double) 92, (double) 110);
		graph.put((double) 93, (double) 112.5);
		graph.put((double) 94, (double) 115);
		graph.put((double) 95, (double) 117.5);
		graph.put((double) 96, (double) 120);
		graph.put((double) 97, (double) 122.5);
		graph.put((double) 98, (double) 125);
		graph.put((double) 99, (double) 127.5);
		graph.put((double) 100, (double) 130);
		graph.put((double) 101, (double) 131.75);
		graph.put((double) 102, (double) 133.5);
		graph.put((double) 103, (double) 135.25);
		graph.put((double) 104, (double) 137);
		graph.put((double) 105, (double) 138.75);
		graph.put((double) 106, (double) 140.5);
		graph.put((double) 107, (double) 142.25);
		graph.put((double) 108, (double) 144);
		graph.put((double) 109, (double) 145.75);
		graph.put((double) 110, (double) 147.5);
		graph.put((double) 111, (double) 149.25);
		graph.put((double) 112, (double) 151);
		graph.put((double) 113, (double) 152.75);
		graph.put((double) 114, (double) 154.5);
		graph.put((double) 115, (double) 156.25);
		graph.put((double) 116, (double) 158);
		graph.put((double) 117, (double) 159.75);
		graph.put((double) 118, (double) 161.5);
		graph.put((double) 119, (double) 163.25);
		graph.put((double) 120, (double) 165);
		graph.put((double) 121, (double) 166.75);
		graph.put((double) 122, (double) 168.5);
		graph.put((double) 123, (double) 170.25);
		graph.put((double) 124, (double) 172);
		graph.put((double) 125, (double) 173.75);
		graph.put((double) 126, (double) 175.5);
		graph.put((double) 127, (double) 177.25);
		graph.put((double) 128, (double) 179);
		graph.put((double) 129, (double) 180.75);
		graph.put((double) 130, (double) 182.5);
		graph.put((double) 131, (double) 184.25);
		graph.put((double) 132, (double) 186);
		graph.put((double) 133, (double) 187.75);
		graph.put((double) 134, (double) 189.5);
		graph.put((double) 135, (double) 191.25);
		graph.put((double) 136, (double) 193);
		graph.put((double) 137, (double) 194.75);
		graph.put((double) 138, (double) 196.5);
		graph.put((double) 139, (double) 198.25);
		graph.put((double) 140, (double) 200);
		graph.put((double) 141, (double) 202.5);
		graph.put((double) 142, (double) 205);
		graph.put((double) 143, (double) 207.5);
		graph.put((double) 144, (double) 210);
		graph.put((double) 145, (double) 212.5);
		graph.put((double) 146, (double) 215);
		graph.put((double) 147, (double) 217.5);
		graph.put((double) 148, (double) 220);
		graph.put((double) 149, (double) 222.5);
		graph.put((double) 150, (double) 225);
		graph.put((double) 151, (double) 227.5);
		graph.put((double) 152, (double) 230);
		graph.put((double) 153, (double) 232.5);
		graph.put((double) 154, (double) 235);
		graph.put((double) 155, (double) 237.5);
		graph.put((double) 156, (double) 240);
		graph.put((double) 157, (double) 242.5);
		graph.put((double) 158, (double) 245);
		graph.put((double) 159, (double) 247.5);
		graph.put((double) 160, (double) 250);
		graph.put((double) 161, (double) 252.5);
		graph.put((double) 162, (double) 255);
		graph.put((double) 163, (double) 257.5);
		graph.put((double) 164, (double) 260);
		graph.put((double) 165, (double) 262.5);
		graph.put((double) 166, (double) 265);
		graph.put((double) 167, (double) 267.5);
		graph.put((double) 168, (double) 270);
		graph.put((double) 169, (double) 272.5);
		graph.put((double) 170, (double) 275);
		graph.put((double) 171, (double) 277.5);
		graph.put((double) 172, (double) 280);
		graph.put((double) 173, (double) 282.5);
		graph.put((double) 174, (double) 285);
		graph.put((double) 175, (double) 287.5);
		graph.put((double) 176, (double) 290);
		graph.put((double) 177, (double) 292.5);
		graph.put((double) 178, (double) 295);
		graph.put((double) 179, (double) 297.5);
		graph.put((double) 180, (double) 300);
		graph.put((double) 181, (double) 302.5);
		graph.put((double) 182, (double) 305);
		graph.put((double) 183, (double) 307.5);
		graph.put((double) 184, (double) 310);
		graph.put((double) 185, (double) 312.5);
		graph.put((double) 186, (double) 315);
		graph.put((double) 187, (double) 317.5);
		graph.put((double) 188, (double) 320);
		graph.put((double) 189, (double) 322.5);
		graph.put((double) 190, (double) 325);
		graph.put((double) 191, (double) 327.5);
		graph.put((double) 192, (double) 330);
		graph.put((double) 193, (double) 332.5);
		graph.put((double) 194, (double) 335);
		graph.put((double) 195, (double) 337.5);
		graph.put((double) 196, (double) 340);
		graph.put((double) 197, (double) 342.5);
		graph.put((double) 198, (double) 345);
		graph.put((double) 199, (double) 347.5);
		graph.put((double) 200, (double) 350);
		graph.put((double) 201, (double) 352);
		graph.put((double) 202, (double) 354);
		graph.put((double) 203, (double) 356);
		graph.put((double) 204, (double) 358);
		graph.put((double) 205, (double) 360);
		graph.put((double) 206, (double) 362);
		graph.put((double) 207, (double) 364);
		graph.put((double) 208, (double) 366);
		graph.put((double) 209, (double) 368);
		graph.put((double) 210, (double) 370);
		graph.put((double) 211, (double) 372);
		graph.put((double) 212, (double) 374);
		graph.put((double) 213, (double) 376);
		graph.put((double) 214, (double) 378);
		graph.put((double) 215, (double) 380);
		graph.put((double) 216, (double) 382);
		graph.put((double) 217, (double) 384);
		graph.put((double) 218, (double) 386);
		graph.put((double) 219, (double) 388);
		graph.put((double) 220, (double) 390);
		graph.put((double) 221, (double) 392);
		graph.put((double) 222, (double) 394);
		graph.put((double) 223, (double) 396);
		graph.put((double) 224, (double) 398);
		graph.put((double) 225, (double) 400);
		graph.put((double) 226, (double) 402.8571429);
		graph.put((double) 227, (double) 405.7142857);
		graph.put((double) 228, (double) 408.5714286);
		graph.put((double) 229, (double) 411.4285714);
		graph.put((double) 230, (double) 414.2857143);
		graph.put((double) 231, (double) 417.1428571);
		graph.put((double) 232, (double) 420);
		graph.put((double) 233, (double) 422.8571429);
		graph.put((double) 234, (double) 425.7142857);
		graph.put((double) 235, (double) 428.5714286);
		graph.put((double) 236, (double) 431.4285714);
		graph.put((double) 237, (double) 434.2857143);
		graph.put((double) 238, (double) 437.1428571);
		graph.put((double) 239, (double) 440);
		graph.put((double) 240, (double) 442.8571429);
		graph.put((double) 241, (double) 445.7142857);
		graph.put((double) 242, (double) 448.5714286);
		graph.put((double) 243, (double) 451.4285714);
		graph.put((double) 244, (double) 454.2857143);
		graph.put((double) 245, (double) 457.1428571);
		graph.put((double) 246, (double) 460);
		graph.put((double) 247, (double) 462.8571429);
		graph.put((double) 248, (double) 465.7142857);
		graph.put((double) 249, (double) 468.5714286);
		graph.put((double) 250, (double) 471.4285714);
		graph.put((double) 251, (double) 474.2857143);
		graph.put((double) 252, (double) 477.1428571);
		graph.put((double) 253, (double) 480);
		graph.put((double) 254, (double) 482.8571429);
		graph.put((double) 255, (double) 485.7142857);
		graph.put((double) 256, (double) 488.5714286);
		graph.put((double) 257, (double) 491.4285714);
		graph.put((double) 258, (double) 494.2857143);
		graph.put((double) 259, (double) 497.1428571);
		graph.put((double) 260, (double) 500);
		graph.put((double) 261, (double) 502.5641026);
		graph.put((double) 262, (double) 505.1282051);
		graph.put((double) 263, (double) 507.6923077);
		graph.put((double) 264, (double) 510.2564103);
		graph.put((double) 265, (double) 512.8205128);
		graph.put((double) 266, (double) 515.3846154);
		graph.put((double) 267, (double) 517.9487179);
		graph.put((double) 268, (double) 520.5128205);
		graph.put((double) 269, (double) 523.0769231);
		graph.put((double) 270, (double) 525.6410256);
		graph.put((double) 271, (double) 528.2051282);
		graph.put((double) 272, (double) 530.7692308);
		graph.put((double) 273, (double) 533.3333333);
		graph.put((double) 274, (double) 535.8974359);
		graph.put((double) 275, (double) 538.4615385);
		graph.put((double) 276, (double) 541.025641);
		graph.put((double) 277, (double) 543.5897436);
		graph.put((double) 278, (double) 546.1538462);
		graph.put((double) 279, (double) 548.7179487);
		graph.put((double) 280, (double) 551.2820513);
		graph.put((double) 281, (double) 553.8461538);
		graph.put((double) 282, (double) 556.4102564);
		graph.put((double) 283, (double) 558.974359);
		graph.put((double) 284, (double) 561.5384615);
		graph.put((double) 285, (double) 564.1025641);
		graph.put((double) 286, (double) 566.6666667);
		graph.put((double) 287, (double) 569.2307692);
		graph.put((double) 288, (double) 571.7948718);
		graph.put((double) 289, (double) 574.3589744);
		graph.put((double) 290, (double) 576.9230769);
		graph.put((double) 291, (double) 579.4871795);
		graph.put((double) 292, (double) 582.0512821);
		graph.put((double) 293, (double) 584.6153846);
		graph.put((double) 294, (double) 587.1794872);
		graph.put((double) 295, (double) 589.7435897);
		graph.put((double) 296, (double) 592.3076923);
		graph.put((double) 297, (double) 594.8717949);
		graph.put((double) 298, (double) 597.4358974);
		graph.put((double) 299, (double) 600);
		graph.put((double) 300, (double) 602.4390244);
		graph.put((double) 301, (double) 604.8780488);
		graph.put((double) 302, (double) 607.3170732);
		graph.put((double) 303, (double) 609.7560976);
		graph.put((double) 304, (double) 612.195122);
		graph.put((double) 305, (double) 614.6341463);
		graph.put((double) 306, (double) 617.0731707);
		graph.put((double) 307, (double) 619.5121951);
		graph.put((double) 308, (double) 621.9512195);
		graph.put((double) 309, (double) 624.3902439);
		graph.put((double) 310, (double) 626.8292683);
		graph.put((double) 311, (double) 629.2682927);
		graph.put((double) 312, (double) 631.7073171);
		graph.put((double) 313, (double) 634.1463415);
		graph.put((double) 314, (double) 636.5853659);
		graph.put((double) 315, (double) 639.0243902);
		graph.put((double) 316, (double) 641.4634146);
		graph.put((double) 317, (double) 643.902439);
		graph.put((double) 318, (double) 646.3414634);
		graph.put((double) 319, (double) 648.7804878);
		graph.put((double) 320, (double) 651.2195122);
		graph.put((double) 321, (double) 653.6585366);
		graph.put((double) 322, (double) 656.097561);
		graph.put((double) 323, (double) 658.5365854);
		graph.put((double) 324, (double) 660.9756098);
		graph.put((double) 325, (double) 663.4146341);
		graph.put((double) 326, (double) 665.8536585);
		graph.put((double) 327, (double) 668.2926829);
		graph.put((double) 328, (double) 670.7317073);
		graph.put((double) 329, (double) 673.1707317);
		graph.put((double) 330, (double) 675.6097561);
		graph.put((double) 331, (double) 678.0487805);
		graph.put((double) 332, (double) 680.4878049);
		graph.put((double) 333, (double) 682.9268293);
		graph.put((double) 334, (double) 685.3658537);
		graph.put((double) 335, (double) 687.804878);
		graph.put((double) 336, (double) 690.2439024);
		graph.put((double) 337, (double) 692.6829268);
		graph.put((double) 338, (double) 695.1219512);
		graph.put((double) 339, (double) 700);
		graph.put((double) 340, (double) 702.7777778);
		graph.put((double) 341, (double) 705.5555556);
		graph.put((double) 342, (double) 708.3333333);
		graph.put((double) 343, (double) 711.1111111);
		graph.put((double) 344, (double) 713.8888889);
		graph.put((double) 345, (double) 716.6666667);
		graph.put((double) 346, (double) 719.4444444);
		graph.put((double) 347, (double) 722.2222222);
		graph.put((double) 348, (double) 725);
		graph.put((double) 349, (double) 727.7777778);
		graph.put((double) 350, (double) 730.5555556);
		graph.put((double) 351, (double) 733.3333333);
		graph.put((double) 352, (double) 736.1111111);
		graph.put((double) 353, (double) 738.8888889);
		graph.put((double) 354, (double) 741.6666667);
		graph.put((double) 355, (double) 744.4444444);
		graph.put((double) 356, (double) 747.2222222);
		graph.put((double) 357, (double) 750);
		graph.put((double) 358, (double) 752.7777778);
		graph.put((double) 359, (double) 755.5555556);
		graph.put((double) 360, (double) 758.3333333);
		graph.put((double) 361, (double) 761.1111111);
		graph.put((double) 362, (double) 763.8888889);
		graph.put((double) 363, (double) 766.6666667);
		graph.put((double) 364, (double) 769.4444444);
		graph.put((double) 365, (double) 772.2222222);
		graph.put((double) 366, (double) 775);
		graph.put((double) 367, (double) 777.7777778);
		graph.put((double) 368, (double) 780.5555556);
		graph.put((double) 369, (double) 783.3333333);
		graph.put((double) 370, (double) 786.1111111);
		graph.put((double) 371, (double) 788.8888889);
		graph.put((double) 372, (double) 791.6666667);
		graph.put((double) 373, (double) 794.4444444);
		graph.put((double) 374, (double) 797.2222222);
		graph.put((double) 375, (double) 800);
		graph.put((double) 376, (double) 802);
		graph.put((double) 377, (double) 804);
		graph.put((double) 378, (double) 806);
		graph.put((double) 379, (double) 808);
		graph.put((double) 380, (double) 810);
		graph.put((double) 381, (double) 812);
		graph.put((double) 382, (double) 814);
		graph.put((double) 383, (double) 816);
		graph.put((double) 384, (double) 818);
		graph.put((double) 385, (double) 820);
		graph.put((double) 386, (double) 822);
		graph.put((double) 387, (double) 824);
		graph.put((double) 388, (double) 826);
		graph.put((double) 389, (double) 828);
		graph.put((double) 390, (double) 830);
		graph.put((double) 391, (double) 832);
		graph.put((double) 392, (double) 834);
		graph.put((double) 393, (double) 836);
		graph.put((double) 394, (double) 838);
		graph.put((double) 395, (double) 840);
		graph.put((double) 396, (double) 842);
		graph.put((double) 397, (double) 844);
		graph.put((double) 398, (double) 846);
		graph.put((double) 399, (double) 848);
		graph.put((double) 400, (double) 850);
	}

	/**
	 * Return Peak Incident Over-Pressure Pso
	 * 
	 * @param z
	 * @return
	 */
	public static double calculatQoWithPso(final double pso) {
		// Check that Z is greater than 0
		if (pso > 0) {
			// http://stackoverflow.com/questions/5419123/how-to-round-a-float-to-the-nearest-quarter
			// float coeff = 4f;
			double nearestWholeValue = Math.round(pso);
			return (graph.get(nearestWholeValue));
		}
		// TODO add logging here
		throw new RuntimeException("invalid Pso value - MAX Value = 400psi");
	}

}
